!function(e,o,n){"use strict";function t(o,n){e.ajax({url:o,type:"GET",dataType:"json",async:!1,data:{code:n}}).done(function(e){"0"===e.error?window.location.href=a:(localStorage.setItem("openId",e.openid),window.openId=e.openid)}).fail(function(){})}var i={parse:function(e){var o=/[\?&]([^\?&=]+)=([^&]+)/g,n=null,t={};for(e=e||window.location.search;null!=(n=o.exec(e));)t[n[1]]=decodeURIComponent(n[2]);return t},get:function(e,o){var n=this.parse(o);return n[e]?n[e]:""},check:function(e){var o=/^https?:\/\/[a-z]+\.fenqile\.com\//i,n=!0;return/^https?/.test(e)&&(n=o.test(e)),n}},c=window.location.href,d=location.href.split("#")[0],a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx9c5f793c4eee9683&redirect_uri="+d+"&response_type=code&scope=snsapi_base#wechat_redirect",r="http://wechat.roobo.com/storybox/roobo/getOpenId.do",w=i.get("code",c);window.openId="",window.deviceId="",t(r,w),window.getDeviceId=function(o){e.ajax({url:"http://wechat.roobo.com/storybox/familymember/getdeviceid.do",type:"GET",dataType:"html",async:!1,data:{openId:o}}).done(function(e){window.deviceId=e,""!==window.deviceId&&window.deviceId!==n||(window.location.href="doscaninfo.html")}).fail(function(){})}}(jQuery,window);